#include <stdio.h>
#include <stdlib.h>

int *parent;

int find(int x) {
    if (parent[x] != x)
        parent[x] = find(parent[x]);
    return parent[x];
}

void unite(int x, int y) {
    parent[y] = x;
}

int jobScheduling(int jobs[][3], int n) {
    int maxDeadline = 0;
    for (int i = 0; i < n; i++) {
        if (jobs[i][1] > maxDeadline)
            maxDeadline = jobs[i][1];
    }

    parent = (int *)malloc((maxDeadline + 1) * sizeof(int));
    for (int i = 0; i <= maxDeadline; i++)
        parent[i] = i;

    int count = 0;
    int profit = 0;
    for (int i = 0; i < n; i++) {
        int availableSlot = find(jobs[i][1]);
        if (availableSlot > 0) {
            profit += jobs[i][2];
            unite(find(availableSlot - 1), availableSlot);
            count++;
        }
    }

    free(parent);
    return profit;
}

int main() {
    // Each job: {job_id, deadline, profit}
    int jobs[][3] = {
        {1, 2, 100},
        {2, 1, 19},
        {3, 2, 27},
        {4, 1, 25},
        {5, 3, 15},
    };
    int n = sizeof(jobs) / sizeof(jobs[0]);

    int maxProfit = jobScheduling(jobs, n);
    printf("Maximum profit is %d\n", maxProfit);

    return 0;
}
